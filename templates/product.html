{% extends "base.html" %}

{% block head %}
    <link href="{{ url_for('static', filename='css/product.css') }}" rel="stylesheet">
{% endblock %}


{% block content %}
    <div class="background-fill">

        <div class="container">
            <div class="content">
                <div class="left-block">
                    {# carousel #}
                    <div id="carouselExampleIndicators" class="carousel slide">
                        {% set img = prod['path_images'].split(', ') %}
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                                    class="active" aria-current="true" aria-label="Slide 1"></button>

                            {% for _ in img[1:] %}
                                <button type="button" data-bs-target="#carouselExampleIndicators"
                                        data-bs-slide-to="{{ loop.index }}"
                                        aria-label="Slide {{ loop.index  + 1 }}"></button>
                            {% endfor %}
                        </div>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="{{ url_for('static', filename='img/catalog/' + img[0]) }}"
                                     class="d-block w-100" alt="Фото потерялось оп пути к вам"
                                     style="height: 50%; max-height: 600px;">
                            </div>
                            {% for path in img[1:] %}
                                <div class="carousel-item">
                                    <img src="{{ url_for('static', filename='img/catalog/' + path) }}"
                                         class="d-block w-100" alt="Фото потерялось оп пути к вам"
                                         style="height: 50%;  max-height: 600px;">
                                </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                                data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                                data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    {# end carousel#}
                </div>
                <div class="right-block">
                    <h5 class="card-title" style="font-size: 35px;">{{ prod['title'] }}</h5>
                    {% if prod['discount'] is none or prod['discount'] < prod['price'] %}
                        <h5 style="font-size: 25px;" class="card-title">{{ prod['price'] }}₽</h5>
                    {% else %}
                        <a class="card-title discount-card" style="color: red; font-size: 25px">{{ prod['price'] }}₽
                            <s style="color: #9f9f9f;">{{ prod['discount'] }}₽</s>
                        </a>

                    {% endif %}
                    <form class="d-grid gap-2 col-6 mx-auto" style="margin: 0 !important" method="post">
                        <button class="btn btn-primary" type="submit" style="width: max-content;">
                            Добавить товар в корзину
                        </button>
                    </form>
                    <div class="descript">
                        {% set param = ['', 'Размеры', 'Тип', 'Материал', 'Цвет', 'Стиль', 'Особености'] %}
                        {% for des in ['description', 'size', 'type', 'material', 'color', 'style', 'features'] %}
                            {% if not descript[des] is none %}
                                <div class="descript-row">
                                    {% if des == 'description' %}
                                        <div class="descript-key">Описание</div>
                                        <div class="descript-value">{{ descript[des] }}</div>
                                    {% else %}
                                        <div class="descript-key">{{ param[loop.index - 1] }}</div>
                                        <div class="descript-value">{{ descript[des] }}</div>
                                    {% endif %}
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div style="padding: 0 20px">
            <h2 style="display: flex;  justify-content: center;">Посмотрите так же наши другие товары</h2>
            <div class="card-container">
                {% for prod in products['products'] %}
                    <div class="card" style="width: 18rem;">
                        <a href="catalog/{{ prod['id'] }}" style="padding: 10px;"><img
                                src="{{ url_for('static', filename='img/catalog/' + prod['path_images'].split(', ')[0]) }}"
                                class="card-img-top" alt="Изображение не найдено"></a>
                        <div class="card-body">
                            <h5 class="card-title">{{ prod['title'] }}</h5>
                            {% if prod['discount'] is none or prod['discount'] < prod['price'] %}
                                <h5 class="card-title">{{ prod['price'] }}₽</h5>
                            {% else %}
                                <a class="card-title discount-card"
                                   style="color: red">{{ prod['price'] }}₽</a>
                                <s style="color: #9f9f9f;">{{ prod['discount'] }}₽</s>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}